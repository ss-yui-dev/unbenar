###########################################################
# Events for the Bladestewards Estate
###########################################################

namespace = bladestewards_estate_events

# The Bladestewards take control
country_event = {
	id = bladestewards_estate_events.1
	title = bladestewards_estate_events.t
	desc = bladestewards_estate_events.d
	picture = PANIC_eventPicture
	
	major = yes
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			set_country_flag = estate_bladestewards_in_power
			set_country_flag = has_estate_disaster_flag
		}
	}
	
	option = {
		name = bladestewards_estate_events.1.a	
		add_stability = -1
		custom_tooltip = bladestewards_estate_events.1.a.tt
	}
}

# Bladestewards brought to heel
country_event = {
	id = bladestewards_estate_events.2
	title = bladestewards_estate_events.2.t
	desc = bladestewards_estate_events.2.d
	picture = GOOD_WITH_MONARCH_eventPicture
	
	major = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			clr_country_flag = has_estate_disaster_flag
		}
	}
	
	option = {
		name = bladestewards_estate_events.2.a
	}
}

#################################################

#Advancement of the Blade Stewards
country_event = {
	id = bladestewards_estate_events.3
	title = bladestewards_estate_events.3.t
	desc = bladestewards_estate_events.3.d
	picture = KNIGHTS_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_bladestewards
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_bladestewards
				modifier = EST_VAL_BLADESTEWARDS_DECLINES
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_bladestewards
				modifier = EST_VAL_BLADESTEWARDS_ADVANCES
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_bladestewards
				modifier = EST_VAL_BLADESTEWARDS_ADVANCES_20
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	

	option = {
		name = nobles_estate_events.3.a #Ok
		add_estate_influence_modifier = {
			estate = estate_bladestewards
			desc = EST_VAL_BLADESTEWARDS_ADVANCES
			influence = 10
			duration = 5475
		}
	}
}

#Decline of the Blade Stewards
country_event = {
	id = bladestewards_estate_events.4
	title = bladestewards_estate_events.4.t
	desc = bladestewards_estate_events.4.d
	picture = BATTLE_VISTULA_LAGOON_ESTATE_eventPicture
	
	trigger = {
		has_estate = estate_bladestewards
		estate_influence = {
			estate = estate_bladestewards
			influence = 15
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_bladestewards
				modifier = EST_VAL_BLADESTEWARDS_DECLINES
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_bladestewards
				modifier = EST_VAL_BLADESTEWARDS_ADVANCES
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_bladestewards
				modifier = EST_VAL_BLADESTEWARDS_ADVANCES_20
			}
		}
	}
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = bladestewards_estate_events.4.a #Ok
		add_estate_influence_modifier = {
			estate = estate_bladestewards
			desc = EST_VAL_BLADESTEWARDS_DECLINES
			influence = -10
			duration = 5475
		}
	}
}

# The Bladesworn during peace
country_event = {
	id = bladestewards_estate_events.5
	title = bladestewards_estate_events.5.t
	desc = bladestewards_estate_events.5.d
	picture = ARMY_WITH_MONASTERY_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_bladestewards
		is_at_war = no
		OR = {
			has_estate_privilege = estate_bladestewards_bladesworn_established
			has_reform = blademarches_royal_bladesworn_army
		}
		NOT = {
			has_country_modifier = bladesworn_charity
			has_country_modifier = bladesworn_adventurers
			has_country_modifier = bladesworn_guard
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = bladestewards_estate_events.5.a
		add_war_exhaustion = -2
		add_country_modifier = {
			name = bladesworn_charity
			duration = 3650
			#desc = until_war_decleration_tt
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
	}
	
	option = {
		name = bladestewards_estate_events.5.b
		add_years_of_income = 0.5
		add_country_modifier = {
			name = bladesworn_adventurers
			duration = 3650
			#desc = until_war_decleration_tt
		}
		add_estate_loyalty = {
			estate = estate_adventurers
			loyalty = -5
		}
	}
	
	option = {
		name = bladestewards_estate_events.5.c
		add_legitimacy_equivalent = {
			amount = 5
			republican_tradition = 2
		}
		add_country_modifier = {
			name = bladesworn_guard
			duration = 3650
			#desc = until_war_decleration_tt
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -5
		}
	}
}

# Competition with the Nobility
country_event = {
	id = bladestewards_estate_events.6
	title = bladestewards_estate_events.6.t
	desc = bladestewards_estate_events.6.d
	picture = DIPLOMAT_INTERROGATION_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_bladestewards
		has_estate = estate_nobles
		
		OR = {
			has_estate_privilege = estate_bladestewards_bladesworn_established
			has_reform = blademarches_royal_bladesworn_army
		}
		
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_bladestewards
				modifier = EST_VAL_HAS_RULERS_FAVOR
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_nobles
				modifier = EST_VAL_HAS_RULERS_FAVOR
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_bladestewards
				modifier = EST_VAL_RULER_PICKED_NO_SIDE
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	#Side with the bladestewards
	option = {
		name = bladestewards_estate_events.6.a
		add_estate_loyalty = {
			estate = estate_bladestewards
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_bladestewards
			desc = EST_VAL_HAS_RULERS_FAVOR
			influence = 10
			duration = 3650
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
	}
	
	#Side with the Nobility
	option = {
		name = bladestewards_estate_events.6.b
		add_estate_loyalty = {
			estate = estate_bladestewards
			loyalty = -10
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_nobles
			desc = EST_VAL_HAS_RULERS_FAVOR
			influence = 10
			duration = 3650
		}
	}
	
	#Say no to both
	option = {
		name = bladestewards_estate_events.6.c
		add_estate_loyalty = {
			estate = estate_bladestewards
			loyalty = -10
		}
		add_estate_influence_modifier = {
			estate = estate_bladestewards
			desc = EST_VAL_RULER_PICKED_NO_SIDE
			influence = -5
			duration = 3650
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
		add_estate_influence_modifier = {
			estate = estate_nobles
			desc = EST_VAL_RULER_PICKED_NO_SIDE
			influence = -5
			duration = 3650
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					estate_loyalty = {
						estate = estate_bladestewards
						loyalty = 40
					}
				}
			}
			modifier = {
				factor = 0
				NOT = {
					estate_loyalty = {
						estate = estate_nobles
						loyalty = 40
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					NOT = {
						estate_influence = {
							estate = estate_bladestewards
							influence = 90
						}
					}
					NOT = {
						estate_influence = {
							estate = estate_nobles
							influence = 90
						}
					}
				}
				estate_loyalty = {
					estate = estate_bladestewards
					loyalty = 40
				}
				estate_loyalty = {
					estate = estate_nobles
					loyalty = 40
				}
			}
		}
	}
	
	#Mediate between the two sides
	option = {
		name = bladestewards_estate_events.6.d
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = silver_tongue_personality
				ruler_has_personality = charismatic_negotiator_personality
			}
		}
		add_estate_loyalty = {
			estate = estate_bladestewards
			loyalty = 10
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 10
		}
		ai_chance = {
			factor = 100
		}
	}
}


country_event = { #Conflict with Clergy
	id = bladestewards_estate_events.7
	title = bladestewards_estate_events.7.t
	desc = { 
		trigger = { religion = corinite }
		desc = "bladestewards_estate_events.7.d_1"
	}
	desc = { 
		trigger = { NOT = { religion = corinite } }
		desc = "bladestewards_estate_events.7.d_2"
	}
	picture = CHURCH_ESTATE_UPSET_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_bladestewards
		has_estate = estate_church
		
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_bladestewards
				modifier = EST_VAL_HAS_RULERS_FAVOR
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_church
				modifier = EST_VAL_HAS_RULERS_FAVOR
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_bladestewards
				modifier = EST_VAL_RULER_PICKED_NO_SIDE
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	#Side with the bladestewards
	option = {
		name = bladestewards_estate_events.7.a
		add_estate_loyalty = {
			estate = estate_bladestewards
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_bladestewards
			desc = EST_VAL_HAS_RULERS_FAVOR
			influence = 10
			duration = 3650
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -10
		}
	}
	
	#Side with the Clergy
	option = {
		name = bladestewards_estate_events.7.b
		add_estate_loyalty = {
			estate = estate_bladestewards
			loyalty = -10
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_church
			desc = EST_VAL_HAS_RULERS_FAVOR
			influence = 10
			duration = 3650
		}
	}
	
	#Say no to both
	option = {
		name = bladestewards_estate_events.7.c
		add_estate_loyalty = {
			estate = estate_bladestewards
			loyalty = -10
		}
		add_estate_influence_modifier = {
			estate = estate_bladestewards
			desc = EST_VAL_RULER_PICKED_NO_SIDE
			influence = -5
			duration = 3650
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
		add_estate_influence_modifier = {
			estate = estate_church
			desc = EST_VAL_RULER_PICKED_NO_SIDE
			influence = -5
			duration = 3650
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					estate_loyalty = {
						estate = estate_bladestewards
						loyalty = 40
					}
				}
			}
			modifier = {
				factor = 0
				NOT = {
					estate_loyalty = {
						estate = estate_church
						loyalty = 40
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					NOT = {
						estate_influence = {
							estate = estate_bladestewards
							influence = 90
						}
					}
					NOT = {
						estate_influence = {
							estate = estate_church
							influence = 90
						}
					}
				}
				estate_loyalty = {
					estate = estate_bladestewards
					loyalty = 40
				}
				estate_loyalty = {
					estate = estate_church
					loyalty = 40
				}
			}
		}
	}
	
	#Mediate between the two sides
	option = {
		name = bladestewards_estate_events.7.d
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = silver_tongue_personality
				ruler_has_personality = charismatic_negotiator_personality
			}
		}
		add_estate_loyalty = {
			estate = estate_bladestewards
			loyalty = 10
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		ai_chance = {
			factor = 100
		}
	}
}

# Rise of a promising Bladesworn
country_event = {
	id = bladestewards_estate_events.8
	title = bladestewards_estate_events.8.t
	desc = bladestewards_estate_events.8.d
	picture = wihgfx_FEMALE_GENERAL_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_bladestewards
		#NOT = { has_ruler_flag = had_promising_bladesworn } #sucks for long-lived
		NOT = { has_country_modifier = had_promising_bladesworn }
		has_estate_privilege = estate_bladestewards_bladesworn_officers
	}
	
	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			#set_ruler_flag = had_promising_bladesworn
			add_country_modifier = {
				name = had_promising_bladesworn
				duration = 18000
				hidden = yes
			}
			random_list = {
				20 = { set_country_flag = bladesworn_decent_general }
				50 = { set_country_flag = bladesworn_good_general }
				30 = { set_country_flag = bladesworn_genius_general }
			}
			random_list = {
				50 = { set_country_flag = bladesworn_decent_commander }
				30 = { set_country_flag = bladesworn_good_commander }
				20 = { set_country_flag = bladesworn_genius_commander }
			}
			random_list = {
				60 = { set_country_flag = bladesworn_decent_reformer }
				30 = { set_country_flag = bladesworn_good_reformer }
				10 = { set_country_flag = bladesworn_genius_reformer }
			}
		}
	}
	
	#They look like a fine general
	option = {
		name = bladestewards_estate_events.8.a
		trigger = {
			OR = {
				has_country_flag = bladesworn_decent_general
				has_country_flag = bladesworn_good_general
				has_country_flag = bladesworn_genius_general
			}
		}
		trigger_switch = {
			on_trigger = has_country_flag
			bladesworn_decent_general = { create_general = { tradition = 50 } }
			bladesworn_good_general = { create_general = { tradition = 75 } }
			bladesworn_genius_general = { create_general = { tradition = 100 } }
		}
		
		ai_chance = {
			factor = 0
		}
	}
	
	#Our whole army will follow their example.
	option = {
		name = bladestewards_estate_events.8.b
		trigger = {
			OR = {
				has_country_flag = bladesworn_decent_commander
				has_country_flag = bladesworn_good_commander
				has_country_flag = bladesworn_genius_commander
			}
		}
		trigger_switch = {
			on_trigger = has_country_flag
			bladesworn_decent_commander = { define_advisor = { type = commandant skill = 1 cost_multiplier = 0.75 } }
			bladesworn_good_commander = { define_advisor = { type = commandant skill = 2 cost_multiplier = 0.5 } }
			bladesworn_genius_commander = { define_advisor = { type = commandant skill = 3 cost_multiplier = 0.25 } }
		}
		ai_chance = {
			factor = 0
		}
	}
	
	#Let them reform
	option = {
		name = bladestewards_estate_events.8.c
		trigger = {
			OR = {
				has_country_flag = bladesworn_decent_reformer
				has_country_flag = bladesworn_good_reformer
				has_country_flag = bladesworn_genius_reformer
			}
		}
		trigger_switch = {
			on_trigger = has_country_flag
			bladesworn_decent_reformer = { add_army_tradition = 10 add_army_professionalism = 0.02 }
			bladesworn_good_reformer = { add_army_tradition = 15 add_army_professionalism = 0.03 }
			bladesworn_genius_reformer = { add_army_tradition = 20 add_army_professionalism = 0.05 }
		}
		ai_chance = {
			factor = 1
		}
	}

	after = {
		clr_country_flag = bladesworn_decent_general
		clr_country_flag = bladesworn_decent_commander
		clr_country_flag = bladesworn_decent_reformer
		clr_country_flag = bladesworn_good_general
		clr_country_flag = bladesworn_good_commander
		clr_country_flag = bladesworn_good_reformer
		clr_country_flag = bladesworn_genius_general
		clr_country_flag = bladesworn_genius_commander
		clr_country_flag = bladesworn_genius_reformer
	}
}


country_event = { #Order uncovers Corruption
	id = bladestewards_estate_events.9
	title = bladestewards_estate_events.9.t
	desc = bladestewards_estate_events.9.d
	picture = DEBATE_REPUBLICAN_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_bladestewards
		any_owned_province = {
			holy_order = bladestewards_order
			development = 20
			has_tax_building_trigger = yes
			has_production_building_trigger = yes
		}
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					holy_order = bladestewards_order
					development = 20
					has_tax_building_trigger = yes
					has_production_building_trigger = yes
				}
				save_event_target_as = corrupt_province
			}
		}
	}
	
	option = { #Hand the land to the Blade Stewards.
		name = bladestewards_estate_events.9.a
		trigger = {
			NOT = {	ruler_has_personality = embezzler_personality }
		}
		change_estate_land_share = {
			estate = estate_bladestewards
			share = 2
		}
		event_target:corrupt_province = {
			spawn_rebels = {
				type = particularist_rebels
				size = 1
			}
		}
	}
	
	option = { #They've learned their lesson... probably.
		name = bladestewards_estate_events.9.b
		trigger = {
			NOT = {	ruler_has_personality = incorruptible_personality }
		}
		add_years_of_income = 1
		add_corruption = 1
		event_target:corrupt_province = {
			add_local_autonomy = 25
		}
		add_estate_loyalty_modifier = {
			estate = estate_church
			desc = EST_VAL_IGNORED_CORRUPTION
			loyalty = 5
			duration = 3650
		}
		add_estate_loyalty_modifier = {
			estate = estate_burghers
			desc = EST_VAL_IGNORED_CORRUPTION
			loyalty = 5
			duration = 3650
		}
		add_estate_loyalty_modifier = {
			estate = estate_bladestewards
			desc = EST_VAL_IGNORED_CORRUPTION
			loyalty = -10
			duration = 3650
		}
	}
	
	option = { #First corruption, now attempted bribery. We will burn this wretched hive of villainy to the ground!
		name = bladestewards_estate_events.9.c
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = cruel_personality
				ruler_has_personality = malevolent_personality
			}
		}
		add_years_of_income = 2
		
		event_target:corrupt_province = {
			add_devastation = 50
		}
		
		change_estate_land_share = {
			estate = estate_church
			share = -2
		}
		change_estate_land_share = {
			estate = estate_burghers
			share = -1
		}
		
		add_estate_loyalty_modifier = {
			estate = estate_church
			desc = EST_VAL_CRUEL_PUNISHMENT
			loyalty = -5
			duration = 3650
		}
		add_estate_loyalty_modifier = {
			estate = estate_burghers
			desc = EST_VAL_CRUEL_PUNISHMENT
			loyalty = -5
			duration = 3650
		}
		add_estate_loyalty_modifier = {
			estate = estate_bladestewards
			desc = EST_VAL_CRUEL_PUNISHMENT
			loyalty = -10
			duration = 3650
		}
	}
}

#Infighting among Bladestewards
country_event = {
	id = bladestewards_estate_events.10
	title = bladestewards_estate_events.10.t
	desc = bladestewards_estate_events.10.d
	picture = ACCUSATION_eventPicture
		
	is_triggered_only = yes
	
	trigger = {
		num_of_samurai = 10
		has_estate = estate_bladestewards
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_bladestewards
				modifier = EST_VAL_BLADESTEWARDS_DECLINES
			}
		}
		has_estate_privilege = estate_bladestewards_bladesworn_established
		NOT = { has_country_modifier = bladesworn_bailout }
	}
	
	immediate = {
		add_country_modifier = {
			name = bladesworn_bailout
			duration = 10800
			hidden = yes
		}
	}
	
	option = { #Prioritize the Bladesworn.
		name = bladestewards_estate_events.10.a
		
		add_country_modifier = {
			name = bladepriests_underfunded
			duration = 5475
		}
		add_estate_influence_modifier = {
			estate = estate_bladestewards
			desc = EST_VAL_BLADESTEWARDS_DECLINES
			influence = -10
			duration = 5475
		}	

		ai_chance = {
			factor = 1
		}
	}
	
	option = { #Prioritize the Bladepriests.
		name = bladestewards_estate_events.10.b

		if = {
			limit = { has_dlc = "Domination" }
			add_country_modifier = {
				name = bladesworn_underfunded
				duration = 5475
			}
		}
		else = {
			add_country_modifier = {
				name = bladesworn_underfunded_non_dom
				duration = 5475
			}
		}
		add_estate_influence_modifier = {
			estate = estate_bladestewards
			desc = EST_VAL_BLADESTEWARDS_DECLINES
			influence = -10
			duration = 5475
		}

		ai_chance = {
			factor = 1
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = { #We have to save them both!
		name = bladestewards_estate_events.10.c
		
		add_years_of_income = -2
		
		add_estate_loyalty = {
			estate = estate_bladestewards
			loyalty = 5
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

#Overzealous Bladepriests
country_event = {
	id = bladestewards_estate_events.11
	title = bladestewards_estate_events.11.t
	desc = bladestewards_estate_events.11.d
	picture = REBELLION_AGAINST_ANGLICANS_eventPicture
		
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_bladestewards
		has_estate_privilege = estate_bladestewards_bladepriests_rally_faithful
		any_owned_province = {
			development = 10
			has_tax_building_trigger = yes
			has_manpower_building_trigger = yes
		}
	}
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					development = 10
					has_tax_building_trigger = yes
					has_manpower_building_trigger = yes
				}
				save_event_target_as = overzealous_province
			}
		}
	}
	
	option = { #The Bladepriests did nothing wrong.
		name = bladestewards_estate_events.11.a
		
		spawn_rebels = {
			type = anti_tax_rebels
			size = 1
		}
		
		add_estate_loyalty = {
			estate = estate_bladestewards
			loyalty = 5
		}

		ai_chance = {
			factor = 1
		}
	}
	
	option = { #They've overstepped the line.
		name = bladestewards_estate_events.11.b
		
		event_target:overzealous_province = {
			add_local_autonomy = 25
		}

		add_estate_loyalty = {
			estate = estate_bladestewards
			loyalty = -5
		}

		ai_chance = {
			factor = 1
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = { #The peasants had the right idea - join the army, or die!
		name = bladestewards_estate_events.11.c
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = cruel_personality
				ruler_has_personality = malevolent_personality
			}
		}
		
		add_years_of_owned_provinces_manpower = {
			years = 1
			trigger = {
				has_tax_building_trigger = yes
				has_manpower_building_trigger = yes
			}
		}
		
		event_target:overzealous_province = {
			add_devastation = 50
			spawn_rebels = {
				type = anti_tax_rebels
				size = 2
			}
		}
		
		add_estate_loyalty = {
			estate = estate_bladestewards
			loyalty = -10
		}
		
		ai_chance = {
			factor = 0
		}
	}
}


# Bladestewards Demands - want greater involvement
country_event = {
	id = bladestewards_estate_events.12
	title = bladestewards_estate_events.12.t
	desc = { 
		trigger = { has_estate_privilege = estate_bladestewards_bladesworn_established }
		desc = "bladestewards_estate_events.12.d_1"
	}
	desc = { 
		trigger = { NOT = { has_estate_privilege = estate_bladestewards_bladesworn_established } }
		desc = "bladestewards_estate_events.12.d_2"
	}
	picture = CRUSADER_HORDE_eventPicture
	#fire_only_once = yes
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_bladestewards
		NOT = { has_country_modifier = bladestewards_demanded_more_privileges }
		NOT = {
 			num_of_estate_privileges = {
 				estate = estate_bladestewards
 				value = 6
 			}
 		}
		OR = {
			NOT = {
				has_dlc = "Domination" 
				has_estate_privilege = estate_bladestewards_bladesworn_officers_non_dom
			}
			AND = {
				OR = {
					has_reform = blademarches_royal_bladesworn_army
					has_estate_privilege = estate_bladestewards_bladesworn_established
				}
				NOT = { has_estate_privilege = estate_bladestewards_bladesworn_officers }
			}
			NOT = { has_estate_privilege = estate_bladestewards_bladepriests_rally_faithful }
			NOT = { has_estate_privilege = estate_bladestewards_bladepriests_blade_conversion }
			NOT = { has_estate_privilege = estate_bladestewards_bladepriests_administrative_support }
			NOT = { has_estate_privilege = estate_bladestewards_chapter_houses }
			AND = {
				has_unlocked_estate_privilege = { estate_privilege = estate_bladestewards_lakelady_cult }
				NOT = { has_estate_privilege = estate_bladestewards_lakelady_cult }
			}
		}
	}
	
	immediate = {
		hidden_effect = { 
			add_country_modifier = {
				name = bladestewards_demanded_more_privileges
				duration = 10800
				hidden = yes
			}
		}
		hidden_effect = {
			capital_scope = {
				save_event_target_as = capital
			}
		}
	}
	
	option = { #Grant Control of Military
		name = bladestewards_estate_events.12.a
		trigger = {
			has_dlc = "Domination"
			OR = {
					has_reform = blademarches_royal_bladesworn_army
					has_estate_privilege = estate_bladestewards_bladesworn_established
				}
			NOT = { has_estate_privilege = estate_bladestewards_bladesworn_officers }
		}
		
		if = {
			limit = { has_estate_privilege = estate_nobles_officer_corp }
			remove_estate_privilege = estate_nobles_officer_corp
			random_owned_province = {
				limit = { is_capital = no }
				spawn_rebels = {
					type = noble_rebels
					size = 1
					win = yes
					estate = estate_nobles
				}
			}
		}		
		if = {
			limit = { has_estate_privilege = estate_nobles_command_of_the_military }
			remove_estate_privilege = estate_nobles_command_of_the_military
			random_owned_province = {
				limit = { is_capital = no }
				spawn_rebels = {
					type = noble_rebels
					size = 1
					win = yes
					estate = estate_nobles
				}
			}
		}
		
		set_estate_privilege = estate_bladestewards_bladesworn_officers
		change_estate_land_share = {
			estate = estate_bladestewards
			share = 3
		}
		
		add_estate_loyalty = {
				estate = estate_nobles
				loyalty = -20
		}

		ai_chance = {
			factor = 1
		}
	}
	
	option = { #Grant Control of Military (Does not own Domination)
		name = bladestewards_estate_events.12.a
		trigger = {
			NOT = { has_dlc = "Domination" }
			has_estate_privilege = estate_bladestewards_bladesworn_established
			NOT = { has_estate_privilege = estate_bladestewards_bladesworn_officers }
		}
		
		if = {
			limit = { has_estate_privilege = estate_nobles_officer_corp }
			remove_estate_privilege = estate_nobles_officer_corp
			random_owned_province = {
				limit = { is_capital = no }
				spawn_rebels = {
					type = noble_rebels
					size = 1
					win = yes
					estate = estate_nobles
				}
			}
		}		
		if = {
			limit = { has_estate_privilege = estate_nobles_command_of_the_military }
			remove_estate_privilege = estate_nobles_command_of_the_military
			random_owned_province = {
				limit = { is_capital = no }
				spawn_rebels = {
					type = noble_rebels
					size = 1
					win = yes
					estate = estate_nobles
				}
			}
		}
		
		set_estate_privilege = estate_bladestewards_bladesworn_officers
		set_country_flag = no_noble_military
		
		change_estate_land_share = {
			estate = estate_bladestewards
			share = 3
		}
		
		add_estate_loyalty = {
				estate = estate_nobles
				loyalty = -20
		}

		ai_chance = {
			factor = 1
		}
	}
	
	option = { #Grant Recruitment Commission
		name = bladestewards_estate_events.12.b
		trigger = {
			NOT = { has_estate_privilege = estate_bladestewards_bladepriests_rally_faithful }
		}
		
		set_estate_privilege = estate_bladestewards_bladepriests_rally_faithful
		
		change_estate_land_share = {
			estate = estate_bladestewards
			share = 3
		}
		
		add_estate_loyalty = {
				estate = estate_nobles
				loyalty = -10
		}
		
		add_estate_loyalty = {
				estate = estate_church
				loyalty = -10
		}
		
		ai_chance = {
			factor = 1
		}
	}
	
	option = { #Let handle Administrative Matters
		name = bladestewards_estate_events.12.c
		trigger = {
			NOT = { has_estate_privilege = estate_bladestewards_bladepriests_administrative_support }
		}
		
		set_estate_privilege = estate_bladestewards_bladepriests_administrative_support
		change_estate_land_share = {
			estate = estate_bladestewards
			share = 3
		}
		
		add_estate_loyalty = {
				estate = estate_church
				loyalty = -10
		}
		add_estate_loyalty = {
				estate = estate_burghers
				loyalty = -5
		}
		
		ai_chance = {
			factor = 1
		}
	}
	
	option = { #Help Convert
		name = bladestewards_estate_events.12.d
		trigger = {
			NOT = { has_estate_privilege = estate_bladestewards_bladepriests_blade_conversion }
		}
		
		set_estate_privilege = estate_bladestewards_bladepriests_blade_conversion
		change_estate_land_share = {
			estate = estate_bladestewards
			share = 3
		}
		
		add_estate_loyalty = {
				estate = estate_church
				loyalty = -10
		}

		ai_chance = {
			factor = 1
		}
	}
	
	option = { #Allow Chapterhouses
		name = bladestewards_estate_events.12.e
		trigger = {
			NOT = { has_estate_privilege = estate_bladestewards_chapter_houses }
		}
		
		set_estate_privilege = estate_bladestewards_chapter_houses
		change_estate_land_share = {
			estate = estate_bladestewards
			share = 10
		}

		ai_chance = {
			factor = 1
		}
	}
	
	option = { #Legitimize the Cult of the Lady of the Lake
		name = bladestewards_estate_events.12.f
		trigger = {
			has_unlocked_estate_privilege = { estate_privilege = estate_bladestewards_lakelady_cult }
			NOT = { has_estate_privilege = estate_bladestewards_lakelady_cult }
		}
		
		set_estate_privilege = estate_bladestewards_lakelady_cult
		change_estate_land_share = {
			estate = estate_bladestewards
			share = 3
		}
		
		add_estate_loyalty = {
				estate = estate_church
				loyalty = -20
		}

		ai_chance = {
			factor = 1
		}
	}
	
	
	option = { #We can give them no more!
		name = bladestewards_estate_events.12.i
		#goto = capital
		if = {
			limit = { has_estate_privilege = estate_bladestewards_bladesworn_established }
			add_country_modifier = {
				name = unhappy_bladesworn
				duration = 5475
			}
			event_target:capital = {
				spawn_rebels = {
					type = bladesworn_rebels
					size = 3
				}
			}
		}
		add_estate_loyalty = {
			estate = estate_bladestewards
			loyalty = -30
		}
		
		ai_chance = {
			factor = 1
		}
	}
}

#Hardliners oppose Modernization
#country_event = {
#	id = bladestewards_estate_events.12
#	title = bladestewards_estate_events.t
#	desc = bladestewards_estate_events.d
#	picture = LIBERUM_VETO_eventPicture
#	
#	is_triggered_only = yes
#	
#	trigger = {
#		has_estate_privilege = estate_bladestewards_bladesworn_modernization
#		employed_advisor = { category = MIL }
#	}
#	
#	option = { #We cannot be at war with our own army.
#		name = bladestewards_estate_events.12.a	
#		
#		
#		add_army_tradition = 5
#		
#		add_estate_loyalty = {
#			estate = estate_bladestewards
#			loyalty = 5
#		}
#	}
#	
#	option = { #*sigh* Give them some medals, a military parade - whatever it takes to make them shut up.
#		name = bladestewards_estate_events.12.b	
#		
#		add_prestige = -10
#		add_army_tradition = -5
#	}
#	
#	option = { #It's time for them to retire.
#		name = bladestewards_estate_events.12.c	
#		
#		add_yearly_manpower = -2
#		remove_advisor_by_category = MIL
#		add_estate_loyalty = {
#			estate = estate_bladestewards
#			loyalty = -10
#		}
#	}
#}












